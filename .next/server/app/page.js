(()=>{var e={};e.id=974,e.ids=[974],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},6819:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=i(260),r=i(8203),n=i(5155),a=i.n(n),l=i(7292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,1377)),"/Users/markkaluznyj/movie-voting-app/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,1354)),"/Users/markkaluznyj/movie-voting-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,9937,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/markkaluznyj/movie-voting-app/src/app/page.tsx"],u={require:i,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},756:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,3219,23)),Promise.resolve().then(i.t.bind(i,4863,23)),Promise.resolve().then(i.t.bind(i,5155,23)),Promise.resolve().then(i.t.bind(i,9350,23)),Promise.resolve().then(i.t.bind(i,6313,23)),Promise.resolve().then(i.t.bind(i,8530,23)),Promise.resolve().then(i.t.bind(i,8921,23))},3492:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,6959,23)),Promise.resolve().then(i.t.bind(i,3875,23)),Promise.resolve().then(i.t.bind(i,8903,23)),Promise.resolve().then(i.t.bind(i,4178,23)),Promise.resolve().then(i.t.bind(i,6013,23)),Promise.resolve().then(i.t.bind(i,7190,23)),Promise.resolve().then(i.t.bind(i,1365,23))},9967:(e,t,i)=>{Promise.resolve().then(i.bind(i,2452)),Promise.resolve().then(i.bind(i,9215))},6919:(e,t,i)=>{Promise.resolve().then(i.bind(i,1280)),Promise.resolve().then(i.bind(i,6387))},6702:(e,t,i)=>{Promise.resolve().then(i.bind(i,4363))},5158:(e,t,i)=>{Promise.resolve().then(i.bind(i,8481))},5723:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});let s=(0,i(1680).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6611:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});let s=(0,i(1680).A)("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]])},7798:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});let s=(0,i(1680).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4269:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});let s=(0,i(1680).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1902:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return y}});let s=i(5488),r=i(1063),n=i(5512),a=r._(i(8009)),l=s._(i(5740)),o=s._(i(9153)),d=i(2034),c=i(4653),u=i(8156);i(6831);let m=i(4055),p=s._(i(1628)),h=i(3727),x={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function f(e,t,i,s,r,n,a){let l=null==e?void 0:e.src;e&&e["data-loaded-src"]!==l&&(e["data-loaded-src"]=l,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&r(!0),null==i?void 0:i.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let s=!1,r=!1;i.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>s,isPropagationStopped:()=>r,persist:()=>{},preventDefault:()=>{s=!0,t.preventDefault()},stopPropagation:()=>{r=!0,t.stopPropagation()}})}(null==s?void 0:s.current)&&s.current(e)}}))}function g(e){return a.use?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let b=(0,a.forwardRef)((e,t)=>{let{src:i,srcSet:s,sizes:r,height:l,width:o,decoding:d,className:c,style:u,fetchPriority:m,placeholder:p,loading:x,unoptimized:b,fill:v,onLoadRef:y,onLoadingCompleteRef:w,setBlurComplete:j,setShowAltText:_,sizesInput:k,onLoad:N,onError:C,...F}=e,P=(0,a.useCallback)(e=>{e&&(C&&(e.src=e.src),e.complete&&f(e,p,y,w,j,b,k))},[i,p,y,w,j,C,b,k]),S=(0,h.useMergedRef)(t,P);return(0,n.jsx)("img",{...F,...g(m),loading:x,width:o,height:l,decoding:d,"data-nimg":v?"fill":"1",className:c,style:u,sizes:r,srcSet:s,src:i,ref:S,onLoad:e=>{f(e.currentTarget,p,y,w,j,b,k)},onError:e=>{_(!0),"empty"!==p&&j(!0),C&&C(e)}})});function v(e){let{isAppRouter:t,imgAttributes:i}=e,s={as:"image",imageSrcSet:i.srcSet,imageSizes:i.sizes,crossOrigin:i.crossOrigin,referrerPolicy:i.referrerPolicy,...g(i.fetchPriority)};return t&&l.default.preload?(l.default.preload(i.src,s),null):(0,n.jsx)(o.default,{children:(0,n.jsx)("link",{rel:"preload",href:i.srcSet?void 0:i.src,...s},"__nimg-"+i.src+i.srcSet+i.sizes)})}let y=(0,a.forwardRef)((e,t)=>{let i=(0,a.useContext)(m.RouterContext),s=(0,a.useContext)(u.ImageConfigContext),r=(0,a.useMemo)(()=>{let e=x||s||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),i=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:i}},[s]),{onLoad:l,onLoadingComplete:o}=e,h=(0,a.useRef)(l);(0,a.useEffect)(()=>{h.current=l},[l]);let f=(0,a.useRef)(o);(0,a.useEffect)(()=>{f.current=o},[o]);let[g,y]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),{props:_,meta:k}=(0,d.getImgProps)(e,{defaultLoader:p.default,imgConf:r,blurComplete:g,showAltText:w});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{..._,unoptimized:k.unoptimized,placeholder:k.placeholder,fill:k.fill,onLoadRef:h,onLoadingCompleteRef:f,setBlurComplete:y,setShowAltText:j,sizesInput:e.sizes,ref:t}),k.priority?(0,n.jsx)(v,{isAppRouter:!i,imgAttributes:_}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2782:(e,t,i)=>{"use strict";e.exports=i(8104).vendored.contexts.AmpContext},6302:(e,t,i)=>{"use strict";e.exports=i(8104).vendored.contexts.HeadManagerContext},8156:(e,t,i)=>{"use strict";e.exports=i(8104).vendored.contexts.ImageConfigContext},2677:(e,t)=>{"use strict";function i(e){let{ampFirst:t=!1,hybrid:i=!1,hasQuery:s=!1}=void 0===e?{}:e;return t||i&&s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return i}})},2034:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return l}}),i(6831);let s=i(8337),r=i(4653);function n(e){return void 0!==e.default}function a(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function l(e,t){var i;let l,o,d,{src:c,sizes:u,unoptimized:m=!1,priority:p=!1,loading:h,className:x,quality:f,width:g,height:b,fill:v=!1,style:y,overrideSrc:w,onLoad:j,onLoadingComplete:_,placeholder:k="empty",blurDataURL:N,fetchPriority:C,decoding:F="async",layout:P,objectFit:S,objectPosition:M,lazyBoundary:A,lazyRoot:I,...z}=e,{imgConf:E,showAltText:U,blurComplete:O,defaultLoader:R}=t,q=E||r.imageConfigDefault;if("allSizes"in q)l=q;else{let e=[...q.deviceSizes,...q.imageSizes].sort((e,t)=>e-t),t=q.deviceSizes.sort((e,t)=>e-t);l={...q,allSizes:e,deviceSizes:t}}if(void 0===R)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let D=z.loader||R;delete z.loader,delete z.srcSet;let T="__next_img_default"in D;if(T){if("custom"===l.loader)throw Error('Image with src "'+c+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=D;D=t=>{let{config:i,...s}=t;return e(s)}}if(P){"fill"===P&&(v=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[P];e&&(y={...y,...e});let t={responsive:"100vw",fill:"100vw"}[P];t&&!u&&(u=t)}let V="",L=a(g),H=a(b);if((i=c)&&"object"==typeof i&&(n(i)||void 0!==i.src)){let e=n(c)?c.default:c;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(o=e.blurWidth,d=e.blurHeight,N=N||e.blurDataURL,V=e.src,!v){if(L||H){if(L&&!H){let t=L/e.width;H=Math.round(e.height*t)}else if(!L&&H){let t=H/e.height;L=Math.round(e.width*t)}}else L=e.width,H=e.height}}let G=!p&&("lazy"===h||void 0===h);(!(c="string"==typeof c?c:V)||c.startsWith("data:")||c.startsWith("blob:"))&&(m=!0,G=!1),l.unoptimized&&(m=!0),T&&c.endsWith(".svg")&&!l.dangerouslyAllowSVG&&(m=!0);let J=a(f),W=Object.assign(v?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:S,objectPosition:M}:{},U?{}:{color:"transparent"},y),$=O||"empty"===k?null:"blur"===k?'url("data:image/svg+xml;charset=utf-8,'+(0,s.getImageBlurSvg)({widthInt:L,heightInt:H,blurWidth:o,blurHeight:d,blurDataURL:N||"",objectFit:W.objectFit})+'")':'url("'+k+'")',B=$?{backgroundSize:W.objectFit||"cover",backgroundPosition:W.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:$}:{},Z=function(e){let{config:t,src:i,unoptimized:s,width:r,quality:n,sizes:a,loader:l}=e;if(s)return{src:i,srcSet:void 0,sizes:void 0};let{widths:o,kind:d}=function(e,t,i){let{deviceSizes:s,allSizes:r}=e;if(i){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let s;s=e.exec(i);s)t.push(parseInt(s[2]));if(t.length){let e=.01*Math.min(...t);return{widths:r.filter(t=>t>=s[0]*e),kind:"w"}}return{widths:r,kind:"w"}}return"number"!=typeof t?{widths:s,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>r.find(t=>t>=e)||r[r.length-1]))],kind:"x"}}(t,r,a),c=o.length-1;return{sizes:a||"w"!==d?a:"100vw",srcSet:o.map((e,s)=>l({config:t,src:i,quality:n,width:e})+" "+("w"===d?e:s+1)+d).join(", "),src:l({config:t,src:i,quality:n,width:o[c]})}}({config:l,src:c,unoptimized:m,width:L,quality:J,sizes:u,loader:D});return{props:{...z,loading:G?"lazy":h,fetchPriority:C,width:L,height:H,decoding:F,className:x,style:{...W,...B},sizes:Z.sizes,srcSet:Z.srcSet,src:w||Z.src},meta:{unoptimized:m,priority:p,placeholder:k,fill:v}}}},9153:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{default:function(){return x},defaultHead:function(){return u}});let s=i(5488),r=i(1063),n=i(5512),a=r._(i(8009)),l=s._(i(7440)),o=i(2782),d=i(6302),c=i(2677);function u(e){void 0===e&&(e=!1);let t=[(0,n.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,n.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function m(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===a.default.Fragment?e.concat(a.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}i(6831);let p=["name","httpEquiv","charSet","itemProp"];function h(e,t){let{inAmpMode:i}=t;return e.reduce(m,[]).reverse().concat(u(i).reverse()).filter(function(){let e=new Set,t=new Set,i=new Set,s={};return r=>{let n=!0,a=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){a=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?n=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?n=!1:t.add(r.type);break;case"meta":for(let e=0,t=p.length;e<t;e++){let t=p[e];if(r.props.hasOwnProperty(t)){if("charSet"===t)i.has(t)?n=!1:i.add(t);else{let e=r.props[t],i=s[t]||new Set;("name"!==t||!a)&&i.has(e)?n=!1:(i.add(e),s[t]=i)}}}}return n}}()).reverse().map((e,t)=>{let s=e.key||t;if(process.env.__NEXT_OPTIMIZE_FONTS&&!i&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,a.default.cloneElement(e,t)}return a.default.cloneElement(e,{key:s})})}let x=function(e){let{children:t}=e,i=(0,a.useContext)(o.AmpStateContext),s=(0,a.useContext)(d.HeadManagerContext);return(0,n.jsx)(l.default,{reduceComponentsToState:h,headManager:s,inAmpMode:(0,c.isInAmpMode)(i),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8337:(e,t)=>{"use strict";function i(e){let{widthInt:t,heightInt:i,blurWidth:s,blurHeight:r,blurDataURL:n,objectFit:a}=e,l=s?40*s:t,o=r?40*r:i,d=l&&o?"viewBox='0 0 "+l+" "+o+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+d+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(d?"none":"contain"===a?"xMidYMid":"cover"===a?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+n+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return i}})},4653:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{VALID_LOADERS:function(){return i},imageConfigDefault:function(){return s}});let i=["default","imgix","cloudinary","akamai","custom"],s={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],unoptimized:!1}},3864:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{default:function(){return o},getImageProps:function(){return l}});let s=i(5488),r=i(2034),n=i(1902),a=s._(i(1628));function l(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}}let o=n.Image},1628:(e,t)=>{"use strict";function i(e){let{config:t,src:i,width:s,quality:r}=e;return t.path+"?url="+encodeURIComponent(i)+"&w="+s+"&q="+(r||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}}),i.__next_img_default=!0;let s=i},7440:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=i(8009),r=()=>{},n=()=>{};function a(e){var t;let{headManager:i,reduceComponentsToState:a}=e;function l(){if(i&&i.mountedInstances){let t=s.Children.toArray(Array.from(i.mountedInstances).filter(Boolean));i.updateHead(a(t,e))}}return null==i||null==(t=i.mountedInstances)||t.add(e.children),l(),r(()=>{var t;return null==i||null==(t=i.mountedInstances)||t.add(e.children),()=>{var t;null==i||null==(t=i.mountedInstances)||t.delete(e.children)}}),r(()=>(i&&(i._pendingUpdate=l),()=>{i&&(i._pendingUpdate=l)})),n(()=>(i&&i._pendingUpdate&&(i._pendingUpdate(),i._pendingUpdate=null),()=>{i&&i._pendingUpdate&&(i._pendingUpdate(),i._pendingUpdate=null)})),null}},1280:(e,t,i)=>{"use strict";i.d(t,{AuthGuard:()=>a});var s=i(5512),r=i(9334),n=i(6387);function a({children:e}){let t=(0,r.usePathname)(),{ready:i}=(0,n.J)();return i||"/welcome"===t?(0,s.jsx)(s.Fragment,{children:e}):null}},8481:(e,t,i)=>{"use strict";i.d(t,{MainContent:()=>ec});var s=i(5512),r=i(6387),n=i(6008),a=i(9334),l=i(6611),o=i(7798),d=i(1680);let c=(0,d.A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),u=(0,d.A)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),m=(0,d.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var p=i(8009);function h(){let e=(0,a.useRouter)(),{user:t,isAdmin:i,signOut:d,unlockAdmin:h,lockAdmin:x}=(0,r.J)(),[f,g]=(0,p.useState)(""),[b,v]=(0,p.useState)(!1),[y,w]=(0,p.useState)(!1);return(0,s.jsxs)("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-[#d2d2d7]/50 shadow-[0_1px_0_rgba(0,0,0,0.04)] overflow-hidden",children:[(0,s.jsxs)("div",{className:"w-full max-w-6xl min-w-0 mx-auto px-4 h-14 flex items-center justify-between gap-2",children:[(0,s.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 text-[#1d1d1f] hover:opacity-80 transition flex-shrink-0 min-w-0 overflow-hidden",children:[(0,s.jsx)(l.A,{className:"w-6 h-6 text-[#007AFF] flex-shrink-0"}),(0,s.jsx)("span",{className:"font-semibold tracking-tight truncate",children:"Movie Night"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[t?(0,s.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1.5 rounded-2xl bg-[#F5F5F7] border border-[#d2d2d7]/60 min-w-0 max-w-[90px] sm:max-w-[140px] md:max-w-[160px] overflow-hidden",children:[(0,s.jsx)(o.A,{className:"w-4 h-4 text-[#86868b] flex-shrink-0"}),(0,s.jsxs)("span",{className:"text-sm text-[#1d1d1f] truncate",children:[t.full_name," \xb7 ",t.course," ",t.level]})]}):(0,s.jsx)(n.default,{href:"/welcome",className:"px-3 py-2 rounded-2xl text-sm font-medium text-[#007AFF] hover:bg-[#007AFF]/10 transition",children:"Sign in to vote"}),i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.default,{href:"/admin",className:"hidden sm:inline-flex px-2 sm:px-3 py-2 rounded-2xl text-sm font-medium text-[#007AFF] hover:bg-[#007AFF]/10 transition flex-shrink-0",children:"Admin"}),(0,s.jsx)("button",{type:"button",onClick:x,className:"p-2 rounded-2xl text-[#007AFF] hover:bg-[#007AFF]/10 transition flex-shrink-0","aria-label":"Exit admin",children:(0,s.jsx)(u,{className:"w-4 h-4"})})]}):(0,s.jsx)("button",{type:"button",onClick:()=>v(!b),className:"p-2 rounded-2xl text-[#86868b] hover:text-[#1d1d1f] hover:bg-[#F5F5F7] transition flex-shrink-0","aria-label":"Admin",children:(0,s.jsx)(c,{className:"w-4 h-4"})}),t?(0,s.jsx)("button",{onClick:()=>{d(),e.replace("/welcome"),e.refresh()},className:"p-2 rounded-2xl text-[#86868b] hover:text-[#1d1d1f] hover:bg-[#F5F5F7] transition flex-shrink-0","aria-label":"Sign out",children:(0,s.jsx)(m,{className:"w-4 h-4"})}):null]})]}),b&&(0,s.jsx)("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/40",onClick:()=>{v(!1),w(!1)},role:"dialog","aria-label":"Admin login",children:(0,s.jsxs)("form",{onSubmit:t=>{t.preventDefault(),h(f)?(g(""),v(!1),w(!1),e.refresh()):w(!0)},onClick:e=>e.stopPropagation(),className:"rounded-2xl bg-white p-4 shadow-xl border border-[#d2d2d7] flex flex-col sm:flex-row gap-3 min-w-[260px]",children:[(0,s.jsx)("input",{type:"password",value:f,onChange:e=>{g(e.target.value),w(!1)},placeholder:"Admin password",className:"px-3 py-2 rounded-xl border border-[#d2d2d7] text-sm focus:outline-none focus:border-[#007AFF] flex-1",autoFocus:!0}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{v(!1),w(!1)},className:"px-3 py-2 rounded-xl border border-[#d2d2d7] text-sm font-medium",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-3 py-2 rounded-xl bg-[#007AFF] text-white text-sm font-medium",children:"Unlock"})]}),y&&(0,s.jsx)("p",{className:"text-red-500 text-xs",children:"Wrong password"})]})})]})}var x=i(4540);function f(){return(0,s.jsxs)("section",{className:"relative w-full aspect-[16/9] min-h-[420px] max-h-[85vh] overflow-hidden bg-black",children:[(0,s.jsx)("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover","aria-hidden":!0,children:(0,s.jsx)("source",{src:"/CIA MOVIE INT 1.mp4",type:"video/mp4"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/40 via-black/50 to-black/60","aria-hidden":!0}),(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center px-6 sm:px-8 text-center",children:[(0,s.jsx)(x.P.h1,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.9,ease:[.22,1,.36,1]},className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-semibold tracking-tight text-white",style:{fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Helvetica Neue", sans-serif',textShadow:"0 2px 48px rgba(0,0,0,0.4), 0 0 1px rgba(0,0,0,0.2)",letterSpacing:"-0.02em"},children:"Movie Night in CIA"}),(0,s.jsx)(x.P.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.9,delay:.2,ease:[.22,1,.36,1]},className:"mt-5 sm:mt-6 text-base sm:text-lg md:text-xl text-white/95 font-normal tracking-[0.02em]",style:{fontFamily:'-apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif',textShadow:"0 1px 24px rgba(0,0,0,0.35)"},children:"Every Wednesday • 7:00 PM • Auditorium (6th Floor)"})]})]})}var g=i(5723);function b(){return(0,s.jsxs)(x.P.section,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-[#86868b] text-sm mb-1",children:[(0,s.jsx)(g.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"Wednesday Session"})]}),(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-semibold tracking-tight text-[#1d1d1f]",children:"Movie Night"}),(0,s.jsx)("p",{className:"mt-2 text-[#86868b] text-sm max-w-md",children:"Suggest films, like others’ picks, and vote for the final list. One vote per person."})]})}var v=i(9872),y=i(5248),w=i(9e3),j=i(5785);class _ extends p.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function k({children:e,isPresent:t}){let i=(0,p.useId)(),r=(0,p.useRef)(null),n=(0,p.useRef)({width:0,height:0,top:0,left:0}),{nonce:a}=(0,p.useContext)(j.Q);return(0,p.useInsertionEffect)(()=>{let{width:e,height:s,top:l,left:o}=n.current;if(t||!r.current||!e||!s)return;r.current.dataset.motionPopId=i;let d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            top: ${l}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),(0,s.jsx)(_,{isPresent:t,childRef:r,sizeRef:n,children:p.cloneElement(e,{ref:r})})}let N=({children:e,initial:t,isPresent:i,onExitComplete:r,custom:n,presenceAffectsLayout:a,mode:l})=>{let o=(0,y.M)(C),d=(0,p.useId)(),c=(0,p.useCallback)(e=>{for(let t of(o.set(e,!0),o.values()))if(!t)return;r&&r()},[o,r]),u=(0,p.useMemo)(()=>({id:d,initial:t,isPresent:i,custom:n,onExitComplete:c,register:e=>(o.set(e,!1),()=>o.delete(e))}),a?[Math.random(),c]:[i,c]);return(0,p.useMemo)(()=>{o.forEach((e,t)=>o.set(t,!1))},[i]),p.useEffect(()=>{i||o.size||!r||r()},[i]),"popLayout"===l&&(e=(0,s.jsx)(k,{isPresent:i,children:e})),(0,s.jsx)(w.t.Provider,{value:u,children:e})};function C(){return new Map}var F=i(5883);let P=e=>e.key||"";function S(e){let t=[];return p.Children.forEach(e,e=>{(0,p.isValidElement)(e)&&t.push(e)}),t}var M=i(3607);let A=({children:e,custom:t,initial:i=!0,onExitComplete:r,presenceAffectsLayout:n=!0,mode:a="sync",propagate:l=!1})=>{let[o,d]=(0,F.xQ)(l),c=(0,p.useMemo)(()=>S(e),[e]),u=l&&!o?[]:c.map(P),m=(0,p.useRef)(!0),h=(0,p.useRef)(c),x=(0,y.M)(()=>new Map),[f,g]=(0,p.useState)(c),[b,w]=(0,p.useState)(c);(0,M.E)(()=>{m.current=!1,h.current=c;for(let e=0;e<b.length;e++){let t=P(b[e]);u.includes(t)?x.delete(t):!0!==x.get(t)&&x.set(t,!1)}},[b,u.length,u.join("-")]);let j=[];if(c!==f){let e=[...c];for(let t=0;t<b.length;t++){let i=b[t],s=P(i);u.includes(s)||(e.splice(t,0,i),j.push(i))}"wait"===a&&j.length&&(e=j),w(S(e)),g(c);return}let{forceRender:_}=(0,p.useContext)(v.L);return(0,s.jsx)(s.Fragment,{children:b.map(e=>{let p=P(e),f=(!l||!!o)&&(c===b||u.includes(p));return(0,s.jsx)(N,{isPresent:f,initial:(!m.current||!!i)&&void 0,custom:f?void 0:t,presenceAffectsLayout:n,mode:a,onExitComplete:f?void 0:()=>{if(!x.has(p))return;x.set(p,!0);let e=!0;x.forEach(t=>{t||(e=!1)}),e&&(null==_||_(),w(h.current),l&&(null==d||d()),r&&r())},children:e},p)})})};var I=i(3864),z=i.n(I);let E=(0,d.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),U=(0,d.A)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),O=(0,d.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),R=(0,d.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),q=(0,d.A)("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),D=(0,d.A)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var T=i(3746),V=i(4269);let L=(0,d.A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),H=(0,d.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function G({open:e,onClose:t,movie:i}){let[r,n]=(0,p.useState)(!1);async function a(){let e=i.plot?.trim();if(e)try{await navigator.clipboard.writeText(e),n(!0),window.setTimeout(()=>n(!1),1200)}catch{}}return(0,s.jsx)(A,{children:e?(0,s.jsxs)(x.P.div,{className:"fixed inset-0 z-[100] flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:[(0,s.jsx)(x.P.div,{className:"absolute inset-0 bg-black/65 backdrop-blur-xl",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),(0,s.jsxs)(x.P.div,{role:"dialog","aria-modal":"true",className:"relative w-full h-full sm:h-auto sm:max-h-[92vh] sm:w-[min(980px,calc(100vw-2rem))] bg-[#0b0b0e]/80 sm:rounded-[28px] overflow-hidden shadow-[0_24px_80px_rgba(0,0,0,0.55)] border border-white/10",initial:{y:24,scale:.98,opacity:0},animate:{y:0,scale:1,opacity:1},exit:{y:24,scale:.98,opacity:0},transition:{type:"spring",stiffness:220,damping:26},onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"absolute top-4 right-4 z-10 p-2.5 rounded-2xl bg-white/10 hover:bg-white/15 text-white/90 transition","aria-label":"Close",children:(0,s.jsx)(V.A,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"h-full sm:h-auto grid grid-cols-1 sm:grid-cols-[320px_1fr]",children:[(0,s.jsx)("div",{className:"relative bg-black/30",children:(0,s.jsxs)("div",{className:"relative w-full h-[44vh] sm:h-full sm:min-h-[520px]",children:[i.poster_url?(0,s.jsx)(z(),{src:i.poster_url,alt:i.title,fill:!0,className:"object-cover",sizes:"(max-width: 640px) 100vw, 320px",priority:!0}):(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white/50 text-sm",children:"No poster"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/10 to-black/10"})]})}),(0,s.jsxs)("div",{className:"p-6 sm:p-8 text-white",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl font-semibold tracking-tight truncate",children:i.title}),i.imdb_rating&&(0,s.jsxs)("div",{className:"mt-2 inline-flex items-center gap-1.5 px-3 py-1.5 rounded-2xl bg-white/10 border border-white/10 text-sm text-white/90",children:[(0,s.jsx)(L,{className:"w-4 h-4 text-amber-400"}),"IMDb ",i.imdb_rating]})]})}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-white/75",children:"Plot"}),(0,s.jsxs)("button",{type:"button",onClick:a,disabled:!i.plot?.trim(),className:"inline-flex items-center gap-2 px-3 py-2 rounded-2xl bg-white/10 hover:bg-white/15 border border-white/10 text-white/90 text-sm font-medium transition disabled:opacity-50","aria-label":"Copy plot",children:[(0,s.jsx)(H,{className:"w-4 h-4"}),r?"Copied":"Copy"]})]}),(0,s.jsx)("p",{className:"mt-3 text-white/90 leading-relaxed whitespace-pre-wrap",children:i.plot?.trim()?i.plot:"No plot available."})]})]})]})]})]}):null})}function J({suggestions:e,myLikedSuggestionIds:t,canSuggest:i=!0}){let n=(0,a.useRouter)(),{user:l,isAdmin:o}=(0,r.J)(),[d,c]=(0,p.useState)(!1),[u,m]=(0,p.useState)(""),[h,f]=(0,p.useState)(!1),[g,b]=(0,p.useState)(!1),[v,y]=(0,p.useState)(null),[w,j]=(0,p.useState)(null);async function _(){if(u.trim()){y(null),f(!0);try{let e=await fetch(`/api/omdb?url=${encodeURIComponent(u.trim())}`),t=await e.json();if(!e.ok)throw Error(t.error??"Failed to fetch");j(t)}catch(e){y(e instanceof Error?e.message:"Could not load movie"),j(null)}finally{f(!1)}}}async function k(){if(!w||!l)return;y(null),b(!0);let e=(0,T.U)();await e.from("voter_profiles").upsert({id:l.id,full_name:l.full_name,course:l.course,level:l.level},{onConflict:"id"});let{error:t}=await e.from("suggestions").insert({imdb_id:w.imdb_id,title:w.title,poster_url:w.poster_url,year:w.year,director:w.director,plot:w.plot,genre:w.genre,imdb_rating:w.imdb_rating,submitted_by:l.id});if(b(!1),t){y(t.message);return}c(!1),m(""),j(null),n.refresh()}return(0,s.jsxs)("section",{className:"mb-12",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#1d1d1f]",children:"Suggestions"}),i?(0,s.jsxs)(x.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(!0),className:"rounded-2xl px-4 py-2.5 flex items-center gap-2 bg-[#007AFF] text-white text-sm font-medium hover:bg-[#0051D5] transition shadow-[0_2px_8px_rgba(0,122,255,0.35)]",children:[(0,s.jsx)(E,{className:"w-4 h-4"}),"Suggest a movie"]}):(0,s.jsx)("a",{href:"/welcome",className:"rounded-2xl px-4 py-2.5 flex items-center gap-2 bg-[#F5F5F7] border border-[#d2d2d7] text-[#86868b] text-sm font-medium",children:"Sign in to suggest"})]}),(0,s.jsx)("div",{className:"flex gap-4 overflow-x-auto overflow-y-hidden pb-4 -mx-4 px-4 scroll-smooth snap-x snap-mandatory [scrollbar-width:thin]",children:e.map(e=>(0,s.jsx)("div",{className:"flex-shrink-0 w-[160px] sm:w-[180px] snap-start",children:(0,s.jsx)(W,{suggestion:e,isLiked:t.has(e.id),isAdmin:o})},e.id))}),0===e.length&&(0,s.jsx)("div",{className:"rounded-[24px] bg-white p-12 text-center shadow-[0_4px_24px_rgba(0,0,0,0.06)]",children:(0,s.jsx)("p",{className:"text-[#86868b] text-sm",children:"No suggestions yet. Add an IMDb link above."})}),(0,s.jsx)(A,{children:d&&(0,s.jsx)(x.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>{c(!1),y(null),j(null),m("")},children:(0,s.jsxs)(x.P.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},onClick:e=>e.stopPropagation(),className:"w-full max-w-lg rounded-[24px] bg-white p-6 shadow-[0_8px_32px_rgba(0,0,0,0.12)] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(U,{className:"w-5 h-5 text-[#007AFF]"}),(0,s.jsx)("h3",{className:"font-semibold text-[#1d1d1f]",children:"Suggest from IMDb"})]}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"Paste IMDb link or ID (e.g. tt0111161)",className:"w-full px-4 py-2.5 rounded-2xl bg-[#F5F5F7] border border-[#d2d2d7] text-[#1d1d1f] placeholder-[#86868b] text-sm focus:outline-none focus:border-[#007AFF] focus:ring-2 focus:ring-[#007AFF]/20"}),(0,s.jsxs)("button",{type:"button",onClick:_,disabled:h||!u.trim(),className:"mt-2 w-full py-2.5 rounded-2xl bg-[#F5F5F7] text-[#1d1d1f] text-sm font-medium hover:bg-[#e8e8ed] disabled:opacity-50 flex items-center justify-center gap-2 border border-[#d2d2d7]",children:[h?(0,s.jsx)(O,{className:"w-4 h-4 animate-spin"}):null,h?"Fetching…":"Fetch movie"]}),(0,s.jsx)(A,{children:w&&(0,s.jsxs)(x.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 pt-4 border-t border-[#d2d2d7]",children:[(0,s.jsx)("p",{className:"text-[#1d1d1f] font-medium",children:w.title}),(0,s.jsxs)("p",{className:"text-xs text-[#86868b] mt-0.5",children:[w.year," \xb7 ",w.genre]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{c(!1),j(null),m("")},className:"flex-1 py-2.5 rounded-2xl border border-[#d2d2d7] text-[#1d1d1f] text-sm hover:bg-[#F5F5F7]",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:k,disabled:g,className:"flex-1 py-2.5 rounded-2xl bg-[#007AFF] text-white text-sm font-medium hover:bg-[#0051D5] disabled:opacity-50 shadow-[0_2px_8px_rgba(0,122,255,0.35)]",children:g?"Submitting…":"Submit suggestion"})]})]})}),v&&(0,s.jsx)("p",{className:"mt-3 text-sm text-red-500",children:v})]})})})]})}function W({suggestion:e,isLiked:t,isAdmin:i}){let n=(0,a.useRouter)(),{user:l}=(0,r.J)(),[o,d]=(0,p.useState)(!1),[c,u]=(0,p.useState)(!1),[m,h]=(0,p.useState)(!1);async function f(){if(!l)return;d(!0);let i=(0,T.U)();await i.from("voter_profiles").upsert({id:l.id,full_name:l.full_name,course:l.course,level:l.level},{onConflict:"id"}),t?await i.from("suggestion_likes").delete().eq("suggestion_id",e.id).eq("user_id",l.id):await i.from("suggestion_likes").insert({suggestion_id:e.id,user_id:l.id}),d(!1),n.refresh()}async function g(){u(!0),await fetch(`/api/suggestions/${e.id}/approve`,{method:"POST"}),u(!1),n.refresh()}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G,{open:m,onClose:()=>h(!1),movie:{title:e.title,poster_url:e.poster_url??null,plot:e.plot??null,imdb_rating:e.imdb_rating??null}}),(0,s.jsxs)(x.P.article,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"rounded-2xl bg-white overflow-hidden shadow-[0_2px_16px_rgba(0,0,0,0.06)] hover:shadow-[0_4px_24px_rgba(0,0,0,0.1)] transition-shadow",onClick:()=>h(!0),children:[(0,s.jsxs)("div",{className:"aspect-[2/3] relative bg-[#F5F5F7]",children:[e.poster_url?(0,s.jsx)(z(),{src:e.poster_url,alt:e.title,fill:!0,className:"object-cover",sizes:"180px"}):(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-[#86868b] text-xs",children:"No poster"}),e.imdb_rating&&(0,s.jsxs)("div",{className:"absolute top-1.5 right-1.5 px-1.5 py-0.5 rounded-lg bg-black/50 backdrop-blur-sm text-amber-500 text-[10px] font-medium",children:["★ ",e.imdb_rating]}),i&&(0,s.jsx)("button",{type:"button",onClick:async t=>{if(t.stopPropagation(),!window.confirm("Delete this movie?"))return;let i=(0,T.U)();await i.from("suggestions").delete().eq("id",e.id),n.refresh()},className:"absolute top-1.5 left-1.5 p-2 rounded-xl bg-white/85 hover:bg-white text-red-600 transition shadow-sm","aria-label":"Delete suggestion",children:(0,s.jsx)(R,{className:"w-3.5 h-3.5"})})]}),(0,s.jsxs)("div",{className:"p-2.5",children:[(0,s.jsx)("h3",{className:"font-semibold text-[#1d1d1f] text-sm truncate",children:e.title}),(0,s.jsxs)("p",{className:"text-[10px] text-[#86868b] mt-0.5 truncate",children:[e.year,e.genre?` \xb7 ${e.genre}`:""]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-1.5 flex-wrap",children:[(0,s.jsxs)("button",{type:"button",onClick:f,disabled:o,className:`flex items-center gap-1 px-2 py-1.5 rounded-xl text-xs font-medium transition disabled:opacity-50 ${t?"bg-[#007AFF] text-white":"bg-[#F5F5F7] text-[#1d1d1f] border border-[#d2d2d7] hover:bg-[#e8e8ed]"}`,children:[(0,s.jsx)(q,{className:"w-3 h-3"}),e.like_count]}),i&&(0,s.jsxs)("button",{type:"button",onClick:g,disabled:c,className:"flex items-center gap-1 px-2 py-1.5 rounded-xl text-xs font-medium bg-emerald-500 text-white hover:bg-emerald-600 transition disabled:opacity-50",children:[c?(0,s.jsx)(O,{className:"w-3 h-3 animate-spin"}):(0,s.jsx)(D,{className:"w-3 h-3"}),"Approve"]})]})]})]})]})}let $=(0,d.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),B=(0,d.A)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function Z(e){return{day:e.getDay(),hour:e.getHours()+e.getMinutes()/60+e.getSeconds()/3600}}let X=(0,d.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),K=(0,d.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Q=(0,d.A)("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),Y=(0,d.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),ee=(0,d.A)("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]]);function et({movieId:e,isVoted:t,disabled:i}){let n=(0,a.useRouter)(),{user:l}=(0,r.J)(),[o,d]=(0,p.useState)(!1);async function c(){if(!l)return;let e=(0,T.U)();await e.from("voter_profiles").upsert({id:l.id,full_name:l.full_name,course:l.course,level:l.level},{onConflict:"id"})}async function u(){if(!l||i)return;d(!0);let s=(0,T.U)();await c(),t?await s.from("votes").delete().eq("user_id",l.id).eq("movie_id",e):(await s.from("votes").delete().eq("user_id",l.id),await s.from("votes").insert({user_id:l.id,movie_id:e})),d(!1),n.refresh()}return(0,s.jsx)(x.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:o||i,className:`mt-3 w-full py-2.5 rounded-2xl text-sm font-medium flex items-center justify-center gap-2 transition disabled:opacity-50 ${t?"bg-[#007AFF] text-white shadow-[0_2px_8px_rgba(0,122,255,0.35)]":"bg-[#F5F5F7] text-[#1d1d1f] border border-[#d2d2d7] hover:bg-[#e8e8ed]"}`,children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y,{className:"w-4 h-4"}),"Voted"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ee,{className:"w-4 h-4"}),"Vote"]})})}function ei({movie:e,rank:t,isVoted:i,totalVotes:n,isWinner:l,votingClosed:o,canVote:d=!0,isAdmin:c,onDeclareWinner:u,compact:m}){let h=(0,a.useRouter)(),{isAdmin:f}=(0,r.J)(),g=c??f,b=(0,T.U)(),[v,y]=(0,p.useState)(!1),[w,j]=(0,p.useState)(null),[_,k]=(0,p.useState)(!1),[N,C]=(0,p.useState)(!1),F=e.percentage??0,P=!!e.plot?.trim();async function S(){if(e.plot?.trim()&&!_){if(w){j(null);return}k(!0);try{let t=await fetch(`/api/translate?text=${encodeURIComponent(e.plot)}`),i=await t.json();t.ok&&i.translated&&j(i.translated)}finally{k(!1)}}}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G,{open:N,onClose:()=>C(!1),movie:{title:e.title,poster_url:e.poster_url??null,plot:e.plot??null,imdb_rating:e.imdb_rating??null}}),(0,s.jsxs)(x.P.article,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.4,delay:.05*t},className:"rounded-[24px] bg-white overflow-hidden shadow-[0_4px_24px_rgba(0,0,0,0.06)] hover:shadow-[0_8px_32px_rgba(0,0,0,0.08)] transition-shadow cursor-pointer",onClick:()=>C(!0),children:[(0,s.jsxs)("div",{className:"aspect-[2/3] relative bg-[#F5F5F7]",children:[e.poster_url?(0,s.jsx)(z(),{src:e.poster_url,alt:e.title,fill:!0,className:"object-cover",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"}):(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-[#86868b] text-sm",children:"No poster"}),e.imdb_rating&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 px-2 py-0.5 rounded-xl bg-black/50 backdrop-blur-sm text-amber-500 text-xs font-medium",children:["★ ",e.imdb_rating]}),l&&(0,s.jsx)("div",{className:"absolute top-2 left-2 right-2 flex justify-center",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl bg-amber-400/95 text-black text-xs font-semibold",children:[(0,s.jsx)(B,{className:"w-4 h-4"}),"Winner"]})}),g&&!l&&(0,s.jsx)("button",{type:"button",onClick:async t=>{t.stopPropagation(),window.confirm("Delete this movie?")&&(await b.from("movies").delete().eq("id",e.id),h.refresh())},className:"absolute top-2 left-2 p-2 rounded-2xl bg-white/85 hover:bg-white text-red-600 transition shadow-sm","aria-label":"Delete movie",children:(0,s.jsx)(R,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-[#1d1d1f] truncate flex-1",children:e.title}),P&&(0,s.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),y(!v)},className:"flex-shrink-0 p-1.5 rounded-xl text-[#007AFF] hover:bg-[#007AFF]/10 transition","aria-label":v?"Hide plot":"Read more",children:v?(0,s.jsx)(X,{className:"w-4 h-4"}):(0,s.jsx)(K,{className:"w-4 h-4"})})]}),(e.year||e.pedagogical_note)&&(0,s.jsxs)("p",{className:"text-xs text-[#86868b] mt-0.5",children:[e.year,e.pedagogical_note&&(0,s.jsx)("span",{className:"block mt-1 text-[#86868b] italic line-clamp-2",children:e.pedagogical_note})]}),(0,s.jsx)(A,{children:v&&P&&(0,s.jsx)(x.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"overflow-hidden",children:(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-[#d2d2d7]",children:[(0,s.jsx)("p",{className:"text-sm text-[#1d1d1f] leading-relaxed",children:w??e.plot}),(0,s.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),S()},disabled:_,className:"mt-2 flex items-center gap-1.5 text-sm text-[#007AFF] hover:underline disabled:opacity-50",children:[_?(0,s.jsx)(O,{className:"w-3.5 h-3.5 animate-spin"}):(0,s.jsx)(Q,{className:"w-3.5 h-3.5"}),w?"Show original":"Translate to Russian"]})]})})}),(0,s.jsx)("div",{className:"mt-3 h-1.5 rounded-full bg-[#F5F5F7] overflow-hidden",children:(0,s.jsx)(x.P.div,{className:"h-full bg-[#007AFF] rounded-full",initial:{width:0},animate:{width:`${F}%`},transition:{duration:.6,delay:.2}})}),(0,s.jsxs)("p",{className:"text-xs text-[#86868b] mt-1",children:[F,"% of votes"]}),!l&&(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"space-y-2",children:[(0,s.jsx)(et,{movieId:e.id,isVoted:i,disabled:o||!d}),g&&u&&(0,s.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),u()},className:"w-full py-2 rounded-2xl text-sm font-medium border border-amber-400/60 text-amber-700 bg-amber-50 hover:bg-amber-100 transition",children:"Declare winner"})]})]})]})]})}function es(e){return e.toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}function er({movies:e,totalVotes:t,myVoteMovieId:i,winnerMovieId:r,isAdmin:n}){let l=(0,a.useRouter)(),o=(0,p.useMemo)(()=>(function(e=new Date){let{day:t,hour:i}=Z(e);return 5===t&&i>=10||6===t||0===t||1===t||2===t&&i<22})(),[]),d=(0,p.useMemo)(()=>(function(e=new Date){let t=new Date(e);t.setSeconds(0,0);let{day:i,hour:s}=Z(t),r=0;return r=i<5?5-i:5===i&&s<10?0:7-(i-5),t.setDate(t.getDate()+r),t.setHours(10,0,0,0),t})(),[]),c=(0,p.useMemo)(()=>(function(e=new Date){let t=new Date(e);t.setSeconds(0,0);let{day:i,hour:s}=Z(t),r=(9-i)%7,n=new Date(t);return n.setDate(t.getDate()+(0===r&&s>=22?7:r)),n.setHours(22,0,0,0),n})(),[]),u=(0,p.useMemo)(()=>[...e].sort((e,t)=>(t.vote_count??0)-(e.vote_count??0)).slice(0,5),[e]),m=o&&!r,h=r?u.find(e=>e.id===r):null,f=r?u.filter(e=>e.id!==r):u;async function g(e){(await fetch("/api/admin/declare-winner",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieId:e,password:"3141"})})).ok&&l.refresh()}return 0===u.length?(0,s.jsxs)("section",{className:"mt-12",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#1d1d1f] mb-4",children:"Final vote"}),(0,s.jsx)("div",{className:"rounded-[24px] bg-white p-12 text-center shadow-[0_4px_24px_rgba(0,0,0,0.06)]",children:(0,s.jsx)("p",{className:"text-[#86868b] text-sm",children:"No films in the final yet. Approve up to 5 suggestions as admin."})})]}):(0,s.jsxs)("section",{className:"mt-12",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#1d1d1f]",children:"Final vote — top 5"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-[#86868b]",children:[(0,s.jsx)($,{className:"w-4 h-4"}),r?(0,s.jsx)("span",{children:"Voting closed"}):o?(0,s.jsxs)("span",{children:["Open until ",es(c)]}):(0,s.jsxs)("span",{children:["Opens ",es(d)]})]})]}),h&&(0,s.jsxs)(x.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-[#1d1d1f] font-medium",children:[(0,s.jsx)(B,{className:"w-5 h-5 text-amber-500"}),"Winner"]}),(0,s.jsx)("div",{className:"rounded-[24px] overflow-hidden shadow-[0_8px_32px_rgba(0,0,0,0.12)] ring-2 ring-amber-400/50",children:(0,s.jsx)(ei,{movie:h,rank:0,isVoted:i===h.id,totalVotes:t,isWinner:!0,votingClosed:!0,canVote:!1,isAdmin:n})})]}),f.length>0&&(0,s.jsxs)(s.Fragment,{children:[!h&&(0,s.jsx)("p",{className:"text-sm text-[#86868b] mb-3",children:"Tournament ladder — vote for one"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:f.map((e,a)=>(0,s.jsx)(ei,{movie:e,rank:a+1,isVoted:i===e.id,totalVotes:t,votingClosed:!!r||!o,canVote:m,isAdmin:n,onDeclareWinner:()=>g(e.id)},e.id))})]})]})}function en({title:e,items:t,type:i}){let r=e=>"nationality"in e?e.nationality:"generation"in e?e.generation:void 0;return(0,s.jsxs)(x.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.4},className:"rounded-[24px] bg-white p-5 shadow-[0_4px_24px_rgba(0,0,0,0.06)]",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-[#86868b] mb-4",children:e}),(0,s.jsx)("ul",{className:"space-y-2",children:t.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center gap-3 py-1.5",children:[(0,s.jsx)("span",{className:"text-[#86868b] text-sm w-5",children:t+1}),e.poster_url?(0,s.jsx)("div",{className:"relative w-8 h-12 rounded-lg overflow-hidden flex-shrink-0 bg-[#F5F5F7]",children:(0,s.jsx)(z(),{src:e.poster_url,alt:"",fill:!0,className:"object-cover",sizes:"32px"})}):(0,s.jsx)("div",{className:"w-8 h-12 rounded-lg bg-[#F5F5F7] flex-shrink-0"}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-[#1d1d1f] truncate",children:e.title}),(r(e)||"subtitle"in e&&e.subtitle)&&(0,s.jsx)("p",{className:"text-xs text-[#86868b]",children:r(e)??("subtitle"in e?e.subtitle:"")})]}),(0,s.jsx)("span",{className:"text-xs text-[#007AFF] tabular-nums font-medium",children:"rating"===i?`★ ${e.vote_count}`:e.vote_count})]},"movie_id"in e?e.movie_id:e.key))}),0===t.length&&(0,s.jsx)("p",{className:"text-sm text-[#86868b]",children:"No data yet."})]})}function ea({voterProfiles:e,votes:t,movies:i}){let r=new Map(e.map(e=>[e.id,e])),n=new Map(i.map(e=>[e.id,e])),a={},l={};t.forEach(e=>{let t=r.get(e.user_id),i=t?.course??"Unknown",s=t?.level??"Unknown";a[i]=a[i]??{},a[i][e.movie_id]=(a[i][e.movie_id]??0)+1,l[s]=l[s]??{},l[s][e.movie_id]=(l[s][e.movie_id]??0)+1});let o=Object.entries(a).map(([e,t])=>{let[i,s]=Object.entries(t).sort((e,t)=>t[1]-e[1])[0]??[null,0],r=i?n.get(i):null;return{course:e,movie_id:i,title:r?.title??"—",poster_url:r?.poster_url??null,vote_count:s}}).filter(e=>e.movie_id).sort((e,t)=>t.vote_count-e.vote_count).slice(0,8),d=Object.entries(l).map(([e,t])=>{let[i,s]=Object.entries(t).sort((e,t)=>t[1]-e[1])[0]??[null,0],r=i?n.get(i):null;return{level:e,movie_id:i,title:r?.title??"—",poster_url:r?.poster_url??null,vote_count:s}}).filter(e=>e.movie_id).sort((e,t)=>t.vote_count-e.vote_count).slice(0,6),c=[...i].filter(e=>e.imdb_rating).map(e=>({id:e.id,title:e.title,poster_url:e.poster_url,ratingNum:parseFloat(String(e.imdb_rating).replace(",","."))||0})).sort((e,t)=>t.ratingNum-e.ratingNum).slice(0,6);return(0,s.jsxs)("section",{className:"mt-16 pt-12 border-t border-[#d2d2d7]",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-[#1d1d1f] mb-6",children:"Impress management"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)(en,{title:"Top by course",items:o.map(e=>({nationality:e.course,movie_id:e.movie_id,title:e.title,poster_url:e.poster_url,vote_count:e.vote_count})),type:"nationality"}),(0,s.jsx)(en,{title:"Top by level",items:d.map(e=>({generation:e.level,movie_id:e.movie_id,title:e.title,poster_url:e.poster_url,vote_count:e.vote_count})),type:"generation"}),(0,s.jsx)(en,{title:"Visual appeal (IMDb)",items:c.map(e=>({key:e.id,title:e.title,poster_url:e.poster_url,vote_count:e.ratingNum})),type:"rating"})]})]})}let el=(0,d.A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var eo=i(837);function ed(){let e=(0,a.useRouter)(),{user:t}=(0,r.J)(),[i,n]=(0,p.useState)({}),[l,o]=(0,p.useState)(!1),[d,c]=(0,p.useState)(!1),u=eo.t.every(e=>i[e]);async function m(){if(!u||!t||l)return;o(!0);let s=(0,T.U)();await s.from("voter_profiles").upsert({id:t.id,full_name:t.full_name,course:t.course,level:t.level},{onConflict:"id"});let{error:r}=await s.from("quiz_responses").upsert({user_id:t.id,q1:i.q1,q2:i.q2,q3:"none",q4:i.q4,q5:i.q5},{onConflict:"user_id"});o(!1),r||(c(!0),e.refresh())}return(0,s.jsxs)("section",{className:"mt-12",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(el,{className:"w-5 h-5 text-[#007AFF]"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#1d1d1f]",children:"Quick survey"})]}),(0,s.jsx)(A,{mode:"wait",children:d?(0,s.jsxs)(x.P.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0},className:"rounded-[24px] bg-white p-8 text-center shadow-[0_4px_24px_rgba(0,0,0,0.06)]",children:[(0,s.jsx)(x.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"inline-flex p-3 rounded-2xl bg-[#34C759]/15 text-[#34C759] mb-4",children:(0,s.jsx)(Y,{className:"w-8 h-8"})}),(0,s.jsx)("p",{className:"text-[#1d1d1f] font-medium",children:"Thanks! Your answers have been saved."})]},"done"):(0,s.jsxs)(x.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"rounded-[24px] bg-white p-6 sm:p-8 shadow-[0_4px_24px_rgba(0,0,0,0.06)]",children:[(0,s.jsx)("p",{className:"text-sm text-[#86868b] mb-6",children:"4 quick questions — tap your choice for each."}),(0,s.jsx)("div",{className:"space-y-6",children:eo.i.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-[#1d1d1f] mb-3",children:e.label}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.options.map(t=>{let r=i[e.id]===t.value;return(0,s.jsx)(x.P.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var i,s;return i=e.id,s=t.value,void n(e=>({...e,[i]:s}))},className:`px-4 py-2.5 rounded-2xl text-sm font-medium transition ${r?"bg-[#007AFF] text-white shadow-[0_2px_8px_rgba(0,122,255,0.35)]":"bg-[#F5F5F7] text-[#1d1d1f] border border-[#d2d2d7] hover:bg-[#e8e8ed]"}`,children:t.label},t.value)})})]},e.id))}),(0,s.jsx)(x.P.button,{type:"button",onClick:m,disabled:!u||l,whileHover:u&&!l?{scale:1.01}:{},whileTap:u&&!l?{scale:.99}:{},className:"mt-8 w-full py-4 rounded-2xl bg-[#007AFF] text-white font-semibold text-base disabled:opacity-50 disabled:pointer-events-none transition shadow-[0_2px_12px_rgba(0,122,255,0.4)] hover:shadow-[0_4px_20px_rgba(0,122,255,0.45)]",children:l?(0,s.jsx)(x.P.span,{animate:{opacity:[1,.5,1]},transition:{repeat:1/0,duration:1},children:"Submitting…"}):"Submit"})]},"form")})]})}function ec({movies:e,totalVotes:t,votes:i,suggestions:n,suggestionLikes:a,voterProfiles:l,winnerMovieId:o}){let{user:d,isAdmin:c}=(0,r.J)(),u=d?i.find(e=>e.user_id===d.id)?.movie_id??null:null,m=d?new Set(a.filter(e=>e.user_id===d.id).map(e=>e.suggestion_id)):new Set;return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-[#F5F5F7] overflow-x-hidden w-full",children:[(0,s.jsx)(h,{}),!d&&(0,s.jsxs)("div",{className:"bg-[#007AFF]/10 border-b border-[#007AFF]/20 px-4 py-2.5 text-center text-sm text-[#007AFF]",children:[(0,s.jsx)("a",{href:"/welcome",className:"underline font-medium",children:"Sign in"})," to vote and suggest films."]}),(0,s.jsx)(f,{}),(0,s.jsxs)("main",{className:"flex-1 container mx-auto px-4 py-8 max-w-6xl",children:[(0,s.jsx)(b,{}),(0,s.jsx)(J,{suggestions:n,myLikedSuggestionIds:m,canSuggest:!!d}),(0,s.jsx)(er,{movies:e,totalVotes:t,myVoteMovieId:u,winnerMovieId:o,isAdmin:c}),(0,s.jsx)(ed,{}),(0,s.jsx)(ea,{voterProfiles:l,votes:i,movies:e})]})]})}},6387:(e,t,i)=>{"use strict";i.d(t,{J:()=>d,UserProvider:()=>o});var s=i(5512),r=i(8009);let n="movie-voting-user",a="movie-voting-admin",l=(0,r.createContext)(null);function o({children:e}){let[t,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),m=(0,r.useCallback)(e=>{localStorage.setItem(n,JSON.stringify(e)),i(e)},[]),p=(0,r.useCallback)(()=>{localStorage.removeItem(n),localStorage.removeItem(a),i(null),d(!1)},[]),h=(0,r.useCallback)(e=>"3141"===e&&(localStorage.setItem(a,"true"),d(!0),!0),[]),x=(0,r.useCallback)(()=>{localStorage.removeItem(a),d(!1)},[]),f=(0,r.useMemo)(()=>({user:t,isAdmin:o,ready:c,setUser:m,signOut:p,unlockAdmin:h,lockAdmin:x}),[t,o,c,m,p,h,x]);return(0,s.jsx)(l.Provider,{value:f,children:e})}function d(){let e=(0,r.useContext)(l);if(!e)throw Error("useUser must be used within UserProvider");return e}},837:(e,t,i)=>{"use strict";i.d(t,{i:()=>s,t:()=>r});let s=[{id:"q1",label:"Preferred accent in films",options:[{value:"british",label:"British"},{value:"american",label:"American"},{value:"no_preference",label:"No preference"}]},{id:"q2",label:"Preferred genre",options:[{value:"comedy",label:"Comedy"},{value:"drama",label:"Drama"},{value:"action",label:"Action"},{value:"documentary",label:"Documentary"}]},{id:"q4",label:"Film length",options:[{value:"short",label:"Short (<90 min)"},{value:"medium",label:"Medium (90–120 min)"},{value:"long",label:"Long (>120 min)"}]},{id:"q5",label:"Preferred era",options:[{value:"classic",label:"Classic (pre-1990)"},{value:"2000s",label:"2000s"},{value:"recent",label:"Recent (2015+)"}]}],r=["q1","q2","q4","q5"]},3746:(e,t,i)=>{"use strict";i.d(t,{U:()=>r});var s=i(6181);function r(){return(0,s.createBrowserClient)("https://peyidfqcjhhjafituwqx.supabase.co","sb_publishable_Zi81Iv4yZKrPDr0NrBI_Wg_JJC8Zt4c")}},1354:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l,metadata:()=>a});var s=i(2740);i(1135);var r=i(9215),n=i(2452);let a={title:"Movie Night — Wednesday Session",description:"Vote for the next movie. Student community."};function l({children:e}){return(0,s.jsx)("html",{lang:"en",className:"overflow-x-hidden",children:(0,s.jsx)("body",{className:"antialiased min-h-screen bg-[#F5F5F7] text-[#1d1d1f] font-sans overflow-x-hidden max-w-[100vw]",children:(0,s.jsx)(r.UserProvider,{children:(0,s.jsx)(n.AuthGuard,{children:e})})})})}},1377:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var s=i(2740),r=i(5546),n=i(4363);async function a(){let e=await (0,r.U)(),[{data:t},{data:i},{data:a},{data:l},{data:o}]=await Promise.all([e.from("movies").select("id, title, poster_url, imdb_id, year, director, plot, genre, imdb_rating, pedagogical_note, added_by, winner_at").order("created_at",{ascending:!1}),e.from("votes").select("movie_id, user_id"),e.from("suggestions").select("id, imdb_id, title, poster_url, year, director, plot, genre, imdb_rating, submitted_by, created_at").order("created_at",{ascending:!1}),e.from("suggestion_likes").select("suggestion_id, user_id"),e.from("voter_profiles").select("id, full_name, course, level")]),d={};i?.forEach(e=>{d[e.movie_id]=(d[e.movie_id]??0)+1});let c=i?.length??0,u={};l?.forEach(e=>{u[e.suggestion_id]=(u[e.suggestion_id]??0)+1});let m=(t??[]).map(e=>({...e,vote_count:d[e.id]??0,percentage:c>0?Math.round((d[e.id]??0)/c*100):0})),p=(t??[]).find(e=>e.winner_at),h=p?.id??null,x=(a??[]).map(e=>({...e,like_count:u[e.id]??0}));return(0,s.jsx)(n.MainContent,{movies:m,totalVotes:c,votes:i??[],suggestions:x,suggestionLikes:l??[],voterProfiles:o??[],winnerMovieId:h})}},2452:(e,t,i)=>{"use strict";i.d(t,{AuthGuard:()=>s});let s=(0,i(6760).registerClientReference)(function(){throw Error("Attempted to call AuthGuard() from the server but AuthGuard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/components/AuthGuard.tsx","AuthGuard")},4363:(e,t,i)=>{"use strict";i.d(t,{MainContent:()=>s});let s=(0,i(6760).registerClientReference)(function(){throw Error("Attempted to call MainContent() from the server but MainContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/components/MainContent.tsx","MainContent")},9215:(e,t,i)=>{"use strict";i.d(t,{UserProvider:()=>r});var s=i(6760);let r=(0,s.registerClientReference)(function(){throw Error("Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/contexts/UserContext.tsx","UserProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/contexts/UserContext.tsx","useUser")},5546:(e,t,i)=>{"use strict";i.d(t,{U:()=>n});var s=i(8374),r=i(4512);async function n(){let e=await (0,r.UL)();return(0,s.createServerClient)("https://peyidfqcjhhjafituwqx.supabase.co","sb_publishable_Zi81Iv4yZKrPDr0NrBI_Wg_JJC8Zt4c",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:i,options:s})=>e.set(t,i,s))}catch{}}}})}},1135:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[989,185,603,969,181,8],()=>i(6819));module.exports=s})();