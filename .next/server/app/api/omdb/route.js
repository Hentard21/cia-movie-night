(()=>{var e={};e.id=472,e.ids=[472],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3303:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>c,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{GET:()=>u});var o=t(2706),n=t(8203),i=t(5994),a=t(9187);async function u(e){let r=e.nextUrl.searchParams.get("id")??e.nextUrl.searchParams.get("url");if(!r)return a.NextResponse.json({error:"Missing id or url"},{status:400});let t=function(e){let r=e.trim(),t=r.match(/tt\d{7,8}/);return t?t[0]:/^tt\d{7,8}$/.test(r)?r:null}(r);if(!t)return a.NextResponse.json({error:"Invalid IMDb link or ID"},{status:400});let s=process.env.OMDB_API_KEY;if(!s)return a.NextResponse.json({error:"OMDb API key not configured"},{status:503});let o=await fetch(`https://www.omdbapi.com/?apikey=${s}&i=${t}&plot=short`),n=await o.json();return"False"===n.Response?a.NextResponse.json({error:n.Error??"Movie not found"},{status:404}):a.NextResponse.json({imdb_id:n.imdbID,title:n.Title,poster_url:n.Poster&&"N/A"!==n.Poster?n.Poster:null,year:n.Year??null,director:n.Director??null,plot:n.Plot??null,genre:n.Genre??null,imdb_rating:n.imdbRating??null})}let p=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/omdb/route",pathname:"/api/omdb",filename:"route",bundlePath:"app/api/omdb/route"},resolvedPagePath:"/Users/markkaluznyj/movie-voting-app/src/app/api/omdb/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:c}=p;function m(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},6487:()=>{},8335:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[989,452],()=>t(3303));module.exports=s})();