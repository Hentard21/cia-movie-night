(()=>{var e={};e.id=280,e.ids=[280],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},6925:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>v,routeModule:()=>c,serverHooks:()=>f,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var n={};t.r(n),t.d(n,{POST:()=>p});var o=t(2706),a=t(8203),s=t(5994),i=t(9187),u=t(5546);async function p(e){let r;try{r=await e.json()}catch{return i.NextResponse.json({error:"Invalid body"},{status:400})}if("3141"!==r.password)return i.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.movieId;if(!t||"string"!=typeof t)return i.NextResponse.json({error:"movieId required"},{status:400});let n=await (0,u.U)();await n.from("movies").update({winner_at:null});let{error:o}=await n.from("movies").update({winner_at:new Date().toISOString()}).eq("id",t);return o?i.NextResponse.json({error:o.message},{status:500}):i.NextResponse.json({ok:!0})}let c=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/admin/declare-winner/route",pathname:"/api/admin/declare-winner",filename:"route",bundlePath:"app/api/admin/declare-winner/route"},resolvedPagePath:"/Users/markkaluznyj/movie-voting-app/src/app/api/admin/declare-winner/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:f}=c;function v(){return(0,s.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},6487:()=>{},8335:()=>{},7301:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return u}});let n=function(e,r){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o(void 0);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,t&&t.set(e,n),n}(t(6301));function o(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(o=function(e){return e?t:r})(e)}let a={current:null},s="function"==typeof n.cache?n.cache:e=>e,i=console.warn;function u(e){return function(...r){i(e(...r))}}s(e=>{try{i(a.current)}finally{a.current=null}})},5546:(e,r,t)=>{"use strict";t.d(r,{U:()=>a});var n=t(8374),o=t(4512);async function a(){let e=await (0,o.UL)();return(0,n.createServerClient)("https://peyidfqcjhhjafituwqx.supabase.co","sb_publishable_Zi81Iv4yZKrPDr0NrBI_Wg_JJC8Zt4c",{cookies:{getAll:()=>e.getAll(),setAll(r){try{r.forEach(({name:r,value:t,options:n})=>e.set(r,t,n))}catch{}}}})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[989,452,969],()=>t(6925));module.exports=n})();