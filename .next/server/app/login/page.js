(()=>{var e={};e.id=520,e.ids=[520],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},8307:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var s=r(260),n=r(8203),o=r(5155),i=r.n(o),a=r(7292),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3751)),"/Users/markkaluznyj/movie-voting-app/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/markkaluznyj/movie-voting-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/markkaluznyj/movie-voting-app/src/app/login/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},756:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,6313,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},3492:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,6013,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},9967:(e,t,r)=>{Promise.resolve().then(r.bind(r,2452)),Promise.resolve().then(r.bind(r,9215))},6919:(e,t,r)=>{Promise.resolve().then(r.bind(r,1280)),Promise.resolve().then(r.bind(r,6387))},1696:(e,t,r)=>{Promise.resolve().then(r.bind(r,3751))},1424:(e,t,r)=>{Promise.resolve().then(r.bind(r,5518))},6611:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1680).A)("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]])},5518:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5512),n=r(8009),o=r(9334),i=r(4540),a=r(6611);let l=(0,r(1680).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var d=r(3746);function u(){(0,o.useRouter)();let[e,t]=(0,n.useState)(""),[r,u]=(0,n.useState)(!1),[c,m]=(0,n.useState)(!1),[p,h]=(0,n.useState)(null);async function v(t){t.preventDefault(),h(null),u(!0);let r=(0,d.U)(),{error:s}=await r.auth.signInWithOtp({email:e,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(u(!1),s){h(s.message);return}m(!0)}return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md glass-panel rounded-2xl p-8 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-white/10",children:(0,s.jsx)(a.A,{className:"w-8 h-8 text-amber-400/90"})}),(0,s.jsx)("span",{className:"text-xl font-semibold tracking-tight",children:"Movie Night"})]}),c?(0,s.jsx)("p",{className:"text-sm text-white/70",children:"Check your inbox for the magic link. Click it to sign in."}):(0,s.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-white/80 mb-2",children:"Email"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/40"}),(0,s.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),placeholder:"you@university.edu",required:!0,className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/40 focus:outline-none focus:border-white/30 focus:ring-1 focus:ring-white/20 transition"})]})]}),p&&(0,s.jsx)("p",{className:"text-sm text-red-400/90",children:p}),(0,s.jsx)("button",{type:"submit",disabled:r,className:"w-full py-3 rounded-xl bg-amber-500/20 text-amber-300 border border-amber-400/30 hover:bg-amber-500/30 transition font-medium disabled:opacity-50",children:r?"Sending…":"Send magic link"})]})]})})}},1280:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>i});var s=r(5512),n=r(9334),o=r(6387);function i({children:e}){let t=(0,n.usePathname)(),{ready:r}=(0,o.J)();return r||"/welcome"===t?(0,s.jsx)(s.Fragment,{children:e}):null}},6387:(e,t,r)=>{"use strict";r.d(t,{J:()=>d,UserProvider:()=>l});var s=r(5512),n=r(8009);let o="movie-voting-user",i="movie-voting-admin",a=(0,n.createContext)(null);function l({children:e}){let[t,r]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),[u,c]=(0,n.useState)(!1),m=(0,n.useCallback)(e=>{localStorage.setItem(o,JSON.stringify(e)),r(e)},[]),p=(0,n.useCallback)(()=>{localStorage.removeItem(o),localStorage.removeItem(i),r(null),d(!1)},[]),h=(0,n.useCallback)(e=>"3141"===e&&(localStorage.setItem(i,"true"),d(!0),!0),[]),v=(0,n.useCallback)(()=>{localStorage.removeItem(i),d(!1)},[]),x=(0,n.useMemo)(()=>({user:t,isAdmin:l,ready:u,setUser:m,signOut:p,unlockAdmin:h,lockAdmin:v}),[t,l,u,m,p,h,v]);return(0,s.jsx)(a.Provider,{value:x,children:e})}function d(){let e=(0,n.useContext)(a);if(!e)throw Error("useUser must be used within UserProvider");return e}},3746:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var s=r(6181);function n(){return(0,s.createBrowserClient)("https://peyidfqcjhhjafituwqx.supabase.co","sb_publishable_Zi81Iv4yZKrPDr0NrBI_Wg_JJC8Zt4c")}},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>i});var s=r(2740);r(1135);var n=r(9215),o=r(2452);let i={title:"Movie Night — Wednesday Session",description:"Vote for the next movie. Student community."};function a({children:e}){return(0,s.jsx)("html",{lang:"en",className:"overflow-x-hidden",children:(0,s.jsx)("body",{className:"antialiased min-h-screen bg-[#F5F5F7] text-[#1d1d1f] font-sans overflow-x-hidden max-w-[100vw]",children:(0,s.jsx)(n.UserProvider,{children:(0,s.jsx)(o.AuthGuard,{children:e})})})})}},3751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/markkaluznyj/movie-voting-app/src/app/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/app/login/page.tsx","default")},2452:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call AuthGuard() from the server but AuthGuard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/components/AuthGuard.tsx","AuthGuard")},9215:(e,t,r)=>{"use strict";r.d(t,{UserProvider:()=>n});var s=r(6760);let n=(0,s.registerClientReference)(function(){throw Error("Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/contexts/UserContext.tsx","UserProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/contexts/UserContext.tsx","useUser")},1135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,185,603,181],()=>r(8307));module.exports=s})();