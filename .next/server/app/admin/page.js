(()=>{var e={};e.id=698,e.ids=[698],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4975:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(260),n=r(8203),a=r(5155),o=r.n(a),i=r(7292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7949)),"/Users/markkaluznyj/movie-voting-app/src/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/markkaluznyj/movie-voting-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/markkaluznyj/movie-voting-app/src/app/admin/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},756:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,6313,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},3492:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,6013,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},5146:(e,t,r)=>{Promise.resolve().then(r.bind(r,7949))},3602:(e,t,r)=>{Promise.resolve().then(r.bind(r,1980))},9967:(e,t,r)=>{Promise.resolve().then(r.bind(r,2452)),Promise.resolve().then(r.bind(r,9215))},6919:(e,t,r)=>{Promise.resolve().then(r.bind(r,1280)),Promise.resolve().then(r.bind(r,6387))},9660:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1680).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1980:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5512),n=r(8009),a=r(9334),o=r(6008),i=r(4540),l=r(1680);let d=(0,l.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),c=(0,l.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var m=r(9660),u=r(6387);r(3746);var p=r(837);function h(){(0,a.useRouter)();let{user:e,isAdmin:t,ready:r}=(0,u.J)(),[l,h]=(0,n.useState)([]),[x,v]=(0,n.useState)(!0),b=function(e){let t=e.length;if(0===t)return null;let r={};return p.i.forEach(e=>{r[e.id]={},e.options.forEach(t=>{r[e.id][t.value]=0})}),e.forEach(e=>{["q1","q2","q3","q4","q5"].forEach(t=>{let s=e[t];s&&r[t]&&(r[t][s]=(r[t][s]??0)+1)})}),{total:t,byQuestion:r}}(l);return r&&e&&t?(0,s.jsxs)("div",{className:"min-h-screen flex flex-col bg-[#F5F5F7]",children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-[#d2d2d7]/50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 h-14 max-w-4xl flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(o.default,{href:"/",className:"p-2 rounded-2xl text-[#86868b] hover:bg-[#F5F5F7] hover:text-[#1d1d1f] transition",children:(0,s.jsx)(d,{className:"w-5 h-5"})}),(0,s.jsx)(c,{className:"w-5 h-5 text-[#007AFF]"}),(0,s.jsx)("span",{className:"font-semibold text-[#1d1d1f]",children:"Admin"})]})})}),(0,s.jsxs)("main",{className:"flex-1 container mx-auto px-4 py-8 max-w-4xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)(m.A,{className:"w-6 h-6 text-[#007AFF]"}),(0,s.jsx)("h1",{className:"text-2xl font-semibold text-[#1d1d1f]",children:"Survey DNA"})]}),(0,s.jsx)("p",{className:"text-sm text-[#86868b] mb-8",children:"Aggregated results from the 5-question survey. Use this to see what the group prefers."}),x?(0,s.jsx)("div",{className:"rounded-[24px] bg-white p-12 text-center shadow-[0_4px_24px_rgba(0,0,0,0.06)]",children:(0,s.jsx)("p",{className:"text-[#86868b]",children:"Loading…"})}):b&&0!==b.total?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-[#1d1d1f]",children:[b.total," response",1!==b.total?"s":""," total"]}),p.i.map((e,t)=>{let r=b.byQuestion[e.id];if(!r)return null;let n=Object.entries(r).filter(([,e])=>e>0).sort((e,t)=>t[1]-e[1]),a=t=>e.options.find(e=>e.value===t)?.label??t;return(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"rounded-[24px] bg-white p-6 shadow-[0_4px_24px_rgba(0,0,0,0.06)]",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-[#86868b] mb-3",children:e.label}),(0,s.jsx)("ul",{className:"space-y-2",children:n.map(([e,t])=>{let r=Math.round(t/b.total*100);return(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-2 rounded-full bg-[#007AFF] transition-all duration-500",style:{width:`${r}%`,minWidth:r>0?"4px":0}}),(0,s.jsx)("span",{className:"text-sm text-[#1d1d1f]",children:a(e)})]}),(0,s.jsxs)("span",{className:"text-sm font-medium text-[#007AFF] w-10 text-right",children:[r,"%"]})]},e)})})]},e.id)})]}):(0,s.jsx)("div",{className:"rounded-[24px] bg-white p-12 text-center shadow-[0_4px_24px_rgba(0,0,0,0.06)]",children:(0,s.jsx)("p",{className:"text-[#86868b]",children:"No survey responses yet."})})]})]}):null}},1280:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>o});var s=r(5512),n=r(9334),a=r(6387);function o({children:e}){let t=(0,n.usePathname)(),{ready:r}=(0,a.J)();return r||"/welcome"===t?(0,s.jsx)(s.Fragment,{children:e}):null}},6387:(e,t,r)=>{"use strict";r.d(t,{J:()=>d,UserProvider:()=>l});var s=r(5512),n=r(8009);let a="movie-voting-user",o="movie-voting-admin",i=(0,n.createContext)(null);function l({children:e}){let[t,r]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),[c,m]=(0,n.useState)(!1),u=(0,n.useCallback)(e=>{localStorage.setItem(a,JSON.stringify(e)),r(e)},[]),p=(0,n.useCallback)(()=>{localStorage.removeItem(a),localStorage.removeItem(o),r(null),d(!1)},[]),h=(0,n.useCallback)(e=>"3141"===e&&(localStorage.setItem(o,"true"),d(!0),!0),[]),x=(0,n.useCallback)(()=>{localStorage.removeItem(o),d(!1)},[]),v=(0,n.useMemo)(()=>({user:t,isAdmin:l,ready:c,setUser:u,signOut:p,unlockAdmin:h,lockAdmin:x}),[t,l,c,u,p,h,x]);return(0,s.jsx)(i.Provider,{value:v,children:e})}function d(){let e=(0,n.useContext)(i);if(!e)throw Error("useUser must be used within UserProvider");return e}},837:(e,t,r)=>{"use strict";r.d(t,{i:()=>s,t:()=>n});let s=[{id:"q1",label:"Preferred accent in films",options:[{value:"british",label:"British"},{value:"american",label:"American"},{value:"no_preference",label:"No preference"}]},{id:"q2",label:"Preferred genre",options:[{value:"comedy",label:"Comedy"},{value:"drama",label:"Drama"},{value:"action",label:"Action"},{value:"documentary",label:"Documentary"}]},{id:"q4",label:"Film length",options:[{value:"short",label:"Short (<90 min)"},{value:"medium",label:"Medium (90–120 min)"},{value:"long",label:"Long (>120 min)"}]},{id:"q5",label:"Preferred era",options:[{value:"classic",label:"Classic (pre-1990)"},{value:"2000s",label:"2000s"},{value:"recent",label:"Recent (2015+)"}]}],n=["q1","q2","q4","q5"]},3746:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var s=r(6181);function n(){return(0,s.createBrowserClient)("https://peyidfqcjhhjafituwqx.supabase.co","sb_publishable_Zi81Iv4yZKrPDr0NrBI_Wg_JJC8Zt4c")}},7949:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/markkaluznyj/movie-voting-app/src/app/admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/app/admin/page.tsx","default")},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>o});var s=r(2740);r(1135);var n=r(9215),a=r(2452);let o={title:"Movie Night — Wednesday Session",description:"Vote for the next movie. Student community."};function i({children:e}){return(0,s.jsx)("html",{lang:"en",className:"overflow-x-hidden",children:(0,s.jsx)("body",{className:"antialiased min-h-screen bg-[#F5F5F7] text-[#1d1d1f] font-sans overflow-x-hidden max-w-[100vw]",children:(0,s.jsx)(n.UserProvider,{children:(0,s.jsx)(a.AuthGuard,{children:e})})})})}},2452:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call AuthGuard() from the server but AuthGuard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/components/AuthGuard.tsx","AuthGuard")},9215:(e,t,r)=>{"use strict";r.d(t,{UserProvider:()=>n});var s=r(6760);let n=(0,s.registerClientReference)(function(){throw Error("Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/contexts/UserContext.tsx","UserProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/contexts/UserContext.tsx","useUser")},1135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,185,603,181,8],()=>r(4975));module.exports=s})();