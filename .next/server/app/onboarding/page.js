(()=>{var e={};e.id=566,e.ids=[566],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},9767:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d});var n=r(260),s=r(8203),o=r(5155),a=r.n(o),i=r(7292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["onboarding",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3169)),"/Users/markkaluznyj/movie-voting-app/src/app/onboarding/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/markkaluznyj/movie-voting-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/markkaluznyj/movie-voting-app/src/app/onboarding/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/onboarding/page",pathname:"/onboarding",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},756:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,6313,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},3492:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,6013,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},9967:(e,t,r)=>{Promise.resolve().then(r.bind(r,2452)),Promise.resolve().then(r.bind(r,9215))},6919:(e,t,r)=>{Promise.resolve().then(r.bind(r,1280)),Promise.resolve().then(r.bind(r,6387))},4338:(e,t,r)=>{Promise.resolve().then(r.bind(r,3169))},7546:(e,t,r)=>{Promise.resolve().then(r.bind(r,8684))},5723:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(1680).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6611:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(1680).A)("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]])},8684:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(5512),s=r(8009),o=r(9334),a=r(4540),i=r(6611);let l=(0,r(1680).A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var d=r(5723),u=r(3746);let c=["Afghanistan","Argentina","Australia","Austria","Belgium","Brazil","Canada","Chile","China","Colombia","Egypt","Finland","France","Germany","Ghana","Greece","India","Indonesia","Iran","Ireland","Italy","Japan","Kenya","South Korea","Mexico","Netherlands","Nigeria","Norway","Pakistan","Philippines","Poland","Portugal","Russia","South Africa","Spain","Sweden","Switzerland","Turkey","Ukraine","United Kingdom","United States","Vietnam","Other"],m=new Date().getFullYear(),p=Array.from({length:60},(e,t)=>m-18-t);function h(){let e=(0,o.useRouter)(),[t,r]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[v,x]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null);async function f(r){if(r.preventDefault(),!t||""===m)return;g(null),x(!0);let n=(0,u.U)(),{data:{user:s}}=await n.auth.getUser();if(!s){x(!1);return}let{error:o}=await n.from("profiles").upsert({id:s.id,email:s.email??"",nationality:t,birth_year:Number(m),updated_at:new Date().toISOString()},{onConflict:"id"});if(x(!1),o){g(o.message);return}e.push("/"),e.refresh()}return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,n.jsxs)(a.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md glass-panel rounded-2xl p-8 border border-white/10",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,n.jsx)("div",{className:"p-2 rounded-xl bg-white/10",children:(0,n.jsx)(i.A,{className:"w-8 h-8 text-amber-400/90"})}),(0,n.jsx)("span",{className:"text-xl font-semibold tracking-tight",children:"Almost there"})]}),(0,n.jsx)("p",{className:"text-sm text-white/60 mb-6",children:"Two quick details so we can tailor picks for our community."}),(0,n.jsxs)("form",{onSubmit:f,className:"space-y-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-white/80 mb-2 flex items-center gap-2",children:[(0,n.jsx)(l,{className:"w-4 h-4 text-white/50"}),"Nationality"]}),(0,n.jsxs)("select",{value:t,onChange:e=>r(e.target.value),required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-white/30 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"18px"},children:[(0,n.jsx)("option",{value:"",children:"Select"}),c.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{className:"block text-sm font-medium text-white/80 mb-2 flex items-center gap-2",children:[(0,n.jsx)(d.A,{className:"w-4 h-4 text-white/50"}),"Birth year"]}),(0,n.jsxs)("select",{value:m,onChange:e=>h(e.target.value?Number(e.target.value):""),required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-white/30 appearance-none cursor-pointer",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"18px"},children:[(0,n.jsx)("option",{value:"",children:"Select"}),p.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),b&&(0,n.jsx)("p",{className:"text-sm text-red-400/90",children:b}),(0,n.jsx)("button",{type:"submit",disabled:v,className:"w-full py-3 rounded-xl bg-amber-500/20 text-amber-300 border border-amber-400/30 hover:bg-amber-500/30 transition font-medium disabled:opacity-50",children:v?"Saving…":"Continue"})]})]})})}},1280:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>a});var n=r(5512),s=r(9334),o=r(6387);function a({children:e}){let t=(0,s.usePathname)(),{ready:r}=(0,o.J)();return r||"/welcome"===t?(0,n.jsx)(n.Fragment,{children:e}):null}},6387:(e,t,r)=>{"use strict";r.d(t,{J:()=>d,UserProvider:()=>l});var n=r(5512),s=r(8009);let o="movie-voting-user",a="movie-voting-admin",i=(0,s.createContext)(null);function l({children:e}){let[t,r]=(0,s.useState)(null),[l,d]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!1),m=(0,s.useCallback)(e=>{localStorage.setItem(o,JSON.stringify(e)),r(e)},[]),p=(0,s.useCallback)(()=>{localStorage.removeItem(o),localStorage.removeItem(a),r(null),d(!1)},[]),h=(0,s.useCallback)(e=>"3141"===e&&(localStorage.setItem(a,"true"),d(!0),!0),[]),v=(0,s.useCallback)(()=>{localStorage.removeItem(a),d(!1)},[]),x=(0,s.useMemo)(()=>({user:t,isAdmin:l,ready:u,setUser:m,signOut:p,unlockAdmin:h,lockAdmin:v}),[t,l,u,m,p,h,v]);return(0,n.jsx)(i.Provider,{value:x,children:e})}function d(){let e=(0,s.useContext)(i);if(!e)throw Error("useUser must be used within UserProvider");return e}},3746:(e,t,r)=>{"use strict";r.d(t,{U:()=>s});var n=r(6181);function s(){return(0,n.createBrowserClient)("https://peyidfqcjhhjafituwqx.supabase.co","sb_publishable_Zi81Iv4yZKrPDr0NrBI_Wg_JJC8Zt4c")}},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>a});var n=r(2740);r(1135);var s=r(9215),o=r(2452);let a={title:"Movie Night — Wednesday Session",description:"Vote for the next movie. Student community."};function i({children:e}){return(0,n.jsx)("html",{lang:"en",className:"overflow-x-hidden",children:(0,n.jsx)("body",{className:"antialiased min-h-screen bg-[#F5F5F7] text-[#1d1d1f] font-sans overflow-x-hidden max-w-[100vw]",children:(0,n.jsx)(s.UserProvider,{children:(0,n.jsx)(o.AuthGuard,{children:e})})})})}},3169:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/markkaluznyj/movie-voting-app/src/app/onboarding/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/app/onboarding/page.tsx","default")},2452:(e,t,r)=>{"use strict";r.d(t,{AuthGuard:()=>n});let n=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call AuthGuard() from the server but AuthGuard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/components/AuthGuard.tsx","AuthGuard")},9215:(e,t,r)=>{"use strict";r.d(t,{UserProvider:()=>s});var n=r(6760);let s=(0,n.registerClientReference)(function(){throw Error("Attempted to call UserProvider() from the server but UserProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/contexts/UserContext.tsx","UserProvider");(0,n.registerClientReference)(function(){throw Error("Attempted to call useUser() from the server but useUser is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/markkaluznyj/movie-voting-app/src/contexts/UserContext.tsx","useUser")},1135:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[989,185,603,181],()=>r(9767));module.exports=n})();